<div class="create-invoice-wrapper">
  <!-- Header Actions -->
  <div class="header-section">
    <div class="breadcrumb-nav">
      <span class="root">Invoices</span>
      <span class="separator">/</span>
      <span class="active">Create New Invoice</span>
    </div>
    <div class="header-actions">
      <button class="btn-outline" (click)="goToList()">View All Invoices</button>
      <button class="btn-outline danger" (click)="clearInvoice()">Clear Form</button>
      <button class="btn-primary" (click)="saveInvoice()">Save Invoice ‚ú®</button>
    </div>
  </div>

  <div class="invoice-card">
    <!-- Billing Details Section -->
    <div class="billing-grid">
      <!-- Bill From (Owner) -->
      <div class="billing-section">
        <span class="section-badge">Bill From</span>
        <div class="owner-details-card">
          <div class="company-logo-placeholder">
            <span class="logo-text">NS</span>
          </div>
          <div class="owner-info">
            <h4 class="company-name">{{ invoice.ownerDetails.companyName }}</h4>
            <p class="address">{{ invoice.ownerDetails.address }}</p>
            <p class="contact">üìû {{ invoice.ownerDetails.phoneNumber }}</p>
          </div>
        </div>
      </div>

      <!-- Bill To (Client) -->
      <div class="billing-section">
        <span class="section-badge">Bill To</span>
        <div class="client-input-group">
          <div class="field-row">
            <div class="input-field">
              <label>Client Name <span class="required">*</span></label>
              <input type="text" [(ngModel)]="invoice.userName" placeholder="Enter client name" required #clientName />
            </div>
          </div>
          <div class="field-row">
            <div class="input-field">
              <label>Phone Number <span class="required">*</span></label>
              <input type="text" [(ngModel)]="invoice.phoneNumber" placeholder="Enter phone number" required
                #phoneNumber />
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Itemized List Section -->
    <div class="service-table-section">
      <div class="table-header">
        <h3 class="section-title">Itemized Services</h3>
      </div>

      <table class="services-list">
        <thead>
          <tr>
            <th class="col-service">Service Type</th>
            <th class="col-qty">Qty</th>
            <th class="col-price">Rate (‚Çπ)</th>
            <th class="col-amount">Amount (‚Çπ)</th>
            <th class="col-notes">Notes</th>
            <th class="col-action"></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let service of invoice.services; let i = index" class="service-row-item">
            <td data-label="Service Type">
              <select class="service-select" [(ngModel)]="service.serviceType" required>
                <option value="" disabled>Select Service</option>
                <option>Wedding Photography</option>
                <option>Videography</option>
                <option>Drone Shots</option>
                <option>Photo and Print</option>
                <option>Print only</option>
                <option>Album Design</option>
                <option>Frame Order</option>
                <option>Pre-Wedding Shoot</option>
              </select>
            </td>
            <td data-label="Qty">
              <input type="number" class="table-input" placeholder="0" [(ngModel)]="service.quantity"
                (input)="recalculate()" required />
            </td>
            <td data-label="Rate">
              <input type="number" class="table-input" placeholder="0.00" [(ngModel)]="service.pricePerUnit"
                (input)="recalculate()" required />
            </td>
            <td data-label="Amount">
              <span class="amount-display">‚Çπ {{ service.amountCharged | number:'1.0-0' }}</span>
            </td>
            <td data-label="Notes">
              <input type="text" class="table-input" placeholder="Optional notes" [(ngModel)]="service.notes" />
            </td>
            <td class="text-right">
              <button type="button" class="btn-remove" (click)="removeService(i)" title="Remove item">
                üóëÔ∏è
              </button>
            </td>
          </tr>
        </tbody>
      </table>

      <button type="button" class="btn-add-line" (click)="addService()">
        <span class="plus-icon">+</span>
        Add Another Line Item
      </button>
    </div>

    <!-- Summary Footer Section -->
    <div class="invoice-footer">
      <div class="summary-group">
        <div class="summary-row total">
          <span>Subtotal</span>
          <span class="value">‚Çπ {{ invoice.totalAmount | number:'1.0-0' }}</span>
        </div>
        <div class="summary-row received">
          <label>Amount Received (‚Çπ)</label>
          <input type="number" class="summary-input" [(ngModel)]="invoice.receivedAmount" (input)="recalculate()"
            required #receivedAmount />
        </div>
        <div class="summary-row balance-due">
          <span class="label">Balance Due</span>
          <span class="value">‚Çπ {{ invoice.balanceAmount | number:'1.0-0' }}</span>
        </div>
      </div>
    </div>
  </div>
</div>