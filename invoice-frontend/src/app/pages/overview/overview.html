<div class="overview-container">

  <!-- Header Section -->
  <div class="header-row">
    <h2 class="page-title">Overview Dashboard</h2>

    <div class="filter-bar">
      <select [(ngModel)]="selectedFilter" (change)="applyPresetFilter()">
        <option value="today">Today</option>
        <option value="week">This Week</option>
        <option value="month">This Month</option>
        <option value="year">This Year</option>
      </select>

      <span class="to-separator">|</span>

      <input type="date" [(ngModel)]="fromDate" (change)="applyCustomDateFilter()" />
      <span class="to-separator">to</span>
      <input type="date" [(ngModel)]="toDate" (change)="applyCustomDateFilter()" />
    </div>
  </div>

  <!-- Loading Indicator -->
  <div *ngIf="loading" class="loading-state">
    <p>Loading your financial snapshot...</p>
  </div>

  <!-- KPI Metrics Grid -->
  <div class="stats-grid" *ngIf="!loading">
    <div class="stat-card clients">
      <div class="card-header">
        <span class="label">Total Clients</span>
        <div class="card-icon">üë•</div>
      </div>
      <h3 class="value">{{ totalClients }}</h3>
    </div>

    <div class="stat-card income">
      <div class="card-header">
        <span class="label">Total Income</span>
        <div class="card-icon">üí∞</div>
      </div>
      <h3 class="value">‚Çπ {{ totalIncome | number:'1.0-0' }}</h3>
    </div>

    <div class="stat-card received">
      <div class="card-header">
        <span class="label">Payments Received</span>
        <div class="card-icon">‚úÖ</div>
      </div>
      <h3 class="value">‚Çπ {{ totalReceived | number:'1.0-0' }}</h3>
    </div>

    <div class="stat-card balance">
      <div class="card-header">
        <span class="label">Outstanding Balance</span>
        <div class="card-icon">‚è≥</div>
      </div>
      <h3 class="value">‚Çπ {{ totalBalance | number:'1.0-0' }}</h3>
    </div>
  </div>

  <!-- Main Content Row -->
  <div class="overview-bottom" *ngIf="!loading">

    <!-- Revenue Chart -->
    <div class="chart-card">
      <h4>Income vs Expenses</h4>
      <div class="chart-wrapper">
        <canvas #incomeChart></canvas>
      </div>
    </div>

    <!-- Quick Expense Form -->
    <div class="expense-card">
      <h4>Quick Add Expense</h4>

      <div class="form-group">
        <label>Amount (‚Çπ)</label>
        <input type="number" placeholder="0.00" [(ngModel)]="expenseAmount" required />
      </div>

      <div class="form-group">
        <label>Reason / Category</label>
        <input type="text" placeholder="e.g. Ink or Printer Issues " [(ngModel)]="expenseReason" required />
      </div>
      <button class="expense-btn" (click)="addExpense()">Add Expense</button>

      <div class="income-card">
        <h4>Quick Add Income</h4>

        <div class="form-group">
          <label>Service Type</label>
          <select class="service-select" [(ngModel)]="incomeServiceType">
            <option value="">Select Service</option>
            <option value="Photo Only">Photo Only</option>
            <option value="Print Only">Print Only</option>
            <option value="Photo and Print">Photo and Print</option>
          </select>
        </div>

        <div class="form-group">
          <label>Amount (‚Çπ)</label>
          <input type="number" placeholder="0" [(ngModel)]="incomeAmount" min="0" />
        </div>

        <div class="form-group">
          <label>Client Name (Optional)</label>
          <input type="text" placeholder="Walk-in Customer" readonly [(ngModel)]="incomeClientName" />
        </div>

        <button class="expense-btn" (click)="addQuickIncome()"
          [disabled]="!incomeServiceType || !incomeAmount || incomeAmount <= 0">
          Add Income
        </button>
      </div>
    </div>

  </div>
</div>